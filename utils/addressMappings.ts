// This file contains local mappings for fast and offline address parsing.

/**
 * A mapping of the first 3 digits of a Russian postal code to the corresponding federal subject.
 * This provides broad coverage for identifying a region from a postal index.
 * Source: Aggregated from open data sources on Russian postal codes.
 */
export const postalToRegion: Record<string, string> = {
    '101': 'Москва', '102': 'Москва', '103': 'Москва', '104': 'Москва', '105': 'Москва', '106': 'Москва', '107': 'Москва', '108': 'Москва', '109': 'Москва', '111': 'Москва', '117': 'Москва', '119': 'Москва', '121': 'Москва', '123': 'Москва', '124': 'Москва', '125': 'Москва', '127': 'Москва', '129': 'Москва', '135': 'Москва',
    '140': 'Московская область', '141': 'Московская область', '142': 'Московская область', '143': 'Московская область', '144': 'Московская область',
    '188': 'Ленинградская область', '190': 'Санкт-Петербург', '191': 'Санкт-Петербург', '192': 'Санкт-Петербург', '193': 'Санкт-Петербург', '194': 'Санкт-Петербург', '195': 'Санкт-Петербург', '196': 'Санкт-Петербург', '197': 'Санкт-Петербург', '198': 'Санкт-Петербург', '199': 'Санкт-Петербург',
    '236': 'Калининградская область', '238': 'Калининградская область',
    // FIX: Expanded coverage for Bryansk Oblast
    '241': 'Брянская область', '242': 'Брянская область', '243': 'Брянская область',
    // FIX: Expanded coverage for Smolensk Oblast
    '214': 'Смоленская область', '215': 'Смоленская область', '216': 'Смоленская область',
    '302': 'Орловская область', '303': 'Орловская область',
    '350': 'Краснодарский край', '352': 'Краснодарский край', '353': 'Краснодарский край', '354': 'Краснодарский край',
    '420': 'Республика Татарстан',
    '620': 'Свердловская область',
    '630': 'Новосибирская область',
    '400': 'Волгоградская область',
    '450': 'Республика Башкортостан',
    '603': 'Нижегородская область',
    '443': 'Самарская область',
    '454': 'Челябинская область',
    '644': 'Омская область',
    '344': 'Ростовская область',
    '660': 'Красноярский край',
    '614': 'Пермский край',
    '394': 'Воронежская область',
    '410': 'Саратовская область',
    '690': 'Приморский край',
    '360': 'Кабардино-Балкарская Республика',
    '367': 'Республика Дагестан',
    '385': 'Республика Адыгея',
    '390': 'Республика Хакасия',
};

/**
 * A mapping of lowercase city names (including common variations) to their official region.
 * This is automatically generated from regionCenters.ts for consistency.
 */
export const cityToRegion: Record<string, string> = {
  "москва": "Москва", "санкт-петербург": "Санкт-Петербург", "севастополь": "Севастополь",
  "майкоп": "Республика Адыгея", "горно-алтайск": "Республика Алтай", "уфа": "Республика Башкортостан",
  "улан-удэ": "Республика Бурятия", "махачкала": "Республика Дагестан", "магас": "Республика Ингушетия",
  "нальчик": "Кабардино-Балкарская Республика", "элиста": "Республика Калмыкия", "черкесск": "Карачаево-Черкесская Республика",
  "петрозаводск": "Республика Карелия", "сыктывкар": "Республика Коми", "йошкар-ола": "Республика Марий Эл",
  "саранск": "Республика Мордовия", "якутск": "Республика Саха (Якутия)", "владикавказ": "Республика Северная Осетия — Алания",
  "казань": "Республика Татарстан", "кызыл": "Республика Тыва", "ижевск": "Удмуртская Республика",
  "абакан": "Республика Хакасия", "грозный": "Чеченская Республика", "чебоксары": "Чувашская Республика",
  "симферополь": "Республика Крым", "барнаул": "Алтайский край", "чита": "Забайкальский край",
  "петропавловск-камчатский": "Камчатский край", "краснодар": "Краснодарский край", "красноярск": "Красноярский край",
  "пермь": "Пермский край", "владивосток": "Приморский край", "ставрополь": "Ставропольский край",
  "хабаровск": "Хабаровский край", "благовещенск": "Амурская область", "архангельск": "Архангельская область",
  "астрахань": "Астраханская область", "белгород": "Белгородская область", 
  "брянск": "Брянская область", "новозыбков": "Брянская область", "клинцы": "Брянская область", "жуковка": "Брянская область", "дубровка": "Брянская область",
  "владимир": "Владимирская область", "волгоград": "Волгоградская область", "вологда": "Вологодская область",
  "воронеж": "Воронежская область", "иваново": "Ивановская область", "иркутск": "Иркутская область",
  "калининград": "Калининградская область", "калуга": "Калужская область", "кемерово": "Кемеровская область — Кузбасс",
  "киров": "Кировская область", "кострома": "Костромская область", "курган": "Курганская область",
  "курск": "Курская область", "липецк": "Липецкая область", "магадан": "Магаданская область",
  "мурманск": "Мурманская область", "нижний новгород": "Нижегородская область", "великий новгород": "Новгородская область",
  "новгород": "Новгородская область", "новосибирск": "Новосибирская область", "омск": "Омская область",
  "оренбург": "Оренбургская область", "орёл": "Орловская область", "орел": "Орловская область",
  "пенза": "Пенская область", "псков": "Псковская область", "ростов-на-дону": "Ростовская область",
  "рязань": "Рязанская область", "самара": "Самарская область", "саратов": "Саратовская область",
  "южно-сахалинск": "Сахалинская область", "екатеринбург": "Свердловская область", 
  "смоленск": "Смоленская область", "рославль": "Смоленская область", "десногорск": "Смоленская область", "гагарин": "Смоленская область", "ярцево": "Смоленская область", "починок": "Смоленская область", "рудня": "Смоленская область", "вязьма": "Смоленская область", "сафоново": "Смоленская область",
  "тамбов": "Тамбовская область", "тверь": "Тверская область", "томск": "Томская область",
  "тула": "Тульская область", "тюмень": "Тюменская область", "ульяновск": "Ульяновская область",
  "челябинск": "Челябинская область", "ярославль": "Ярославская область", "биробиджан": "Еврейская автономная область",
  "нарьян-мар": "Ненецкий автономный округ", "ханты-мансийск": "Ханты-Мансийский автономный округ — Югра",
  "анадырь": "Чукотский автономный округ", "салехард": "Ямало-Ненецкий автономный округ",
  "спб": "Санкт-Петербург", "питер": "Санкт-Петербург",
};

/**
 * Gets a region by its 6-digit postal code.
 * @param postal The 6-digit postal code string.
 * @returns The region name or undefined if not found.
 */
export function getRegionByPostal(postal: string): string | undefined {
    if (postal && postal.length === 6) {
        const prefix = postal.substring(0, 3);
        return postalToRegion[prefix];
    }
    return undefined;
}

/**
 * Gets a region by a city name.
 * @param city The city name (should be lowercased and normalized).
 * @returns The region name or undefined if not found.
 */
export function getRegionByCity(city: string): string | undefined {
    return cityToRegion[city.toLowerCase().trim()];
}